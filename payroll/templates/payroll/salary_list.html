{% extends "payroll/base_.html" %}
{% load crispy_forms_tags %}
{% block content %}



<div class="card mt-0">
    <div class="card-header">
        <div>
            <h4>Timesheet</h4>


        </div>
        <div class="btn-toolbar col-md-4" role="group">
            <div class="btn-group mr-2 " role="group" aria-label="First group">


            </div>

        </div>
    </div>
    <div class="card-body">
        <div class="table-responsive-sm"></div>
        <table class="table table-hover table-sm">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Name</th>
                    <th scope="col">Hours</th>
                    <th scope="col">Rate</th>
                    <th scope="col">Salary</th>
                    <th scope="col">NHT</th>
                    <th scope="col">NIS</th>
                    <th scope="col">ED TAX</th>
                    <th scope="col">Income Tax</th>
                    <th scope="col">Net Pay</th>
                    <th scope="col"> Actions</th>

                </tr>
            </thead>
            <tbody>

                {% for sal in object_list %}
                <tr>

                    <th scope="row">{{ sal.employee.employee_number }}</th>
                    <td scope="row">{{ sal.employee.full_name }}</td>
                    <td> {{ sal.hours_worked }}</td>
                    <td> {{ sal.rate }}</td>
                    <td>{{ sal.calculate_base_salary|floatformat }}</td>
                    <td> {{ sal.calculate_nht|floatformat }}</td>
                    <td> {{ sal.calculate_nis|floatformat }}</td>
                    <td> {{ sal.calculate_ed_tax|floatformat }}</td>
                    <td>{{ sal.calculate_income_tax|floatformat}}</td>
                    <td>{{ sal.calculate_net_pay|floatformat}}</td>
                    <td> <a href="#" role="button" class="btn btn-secondary">Pay</a> </td>
                </tr>
                {% endfor %}

            </tbody>
        </table>
    </div>
</div>
<div class="card-footer pb-0">
    <ul class="pagination justify-content-center pt-1">
        {% if is_paginated %}
        {% if page_obj.has_previous  %}
        <li class="page-item mr-1"><a class="btn btn-outline-info mb-4 btn-sm" href="?page=1">First</a></li>
        <li class="page-item mr-1"><a class="btn btn-outline-info mb-4 btn-sm"
                href="?page={{ page_obj.previous_page_number }}">Previous</a></li>
        {% endif %}
        {% for num in page_obj.paginator.page_range %}
        {% if page_obj.number == num %}
        <li class="page-item mr-1"><a class="btn btn-info mb-4 btn-sm" href="?page={{ num }}">{{ num }}</a></li>
        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3'%}
        <li class="page-item mr-1"><a class="btn btn-outline-info mb-4 btn-sm" href="?page={{ num }}">{{ num }}</a>
        </li>
        {% endif %}
        {% endfor %}
        {% if page_obj.has_next %}
        <li class="page-item mr-1"><a class="btn btn-outline-info mb-4 btn-sm"
                href="?page={{ page_obj.next_page_number }}">Next</a></li>
        <li class="page-item mr-1"><a class="btn btn-outline-info mb-4 btn-sm"
                href="?page={{ page_obj.paginator.num_pages }}">Last</a></li>
        {% endif %}
        {% endif %}
    </ul>
</div>
</div>
{% endblock content %}